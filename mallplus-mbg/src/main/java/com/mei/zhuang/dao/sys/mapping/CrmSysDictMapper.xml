<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mei.zhuang.dao.sys.CrmSysDictMapper">

	<!-- 通用查询映射结果 -->
	<resultMap id="BaseResultMap" type="com.mei.zhuang.entity.sys.CrmSysDict">
		<id column="id" property="id" />
		<result column="value" property="value" />
		<result column="text" property="text" />
		<result column="table_name" property="tableName" />
		<result column="field" property="field" />
		<result column="field_name" property="fieldName" />
		<result column="sort" property="sort" />
		<result column="create_user_id" property="createUserId" />
		<result column="create_date" property="createDate" />
		<result column="create_time" property="createTime" />
		<result column="update_user_id" property="updateUserId" />
		<result column="update_date" property="updateDate" />
		<result column="update_time" property="updateTime" />
		<result column="version" property="version" />
	</resultMap>
	<sql id="whereCondition">
       <where>
           <if test="text != null and text != ''">
               t.text like CONCAT('%', #{text}, '%')
           </if>
           <if test="fieldName != null and fieldName != ''">
               and t.field_name like CONCAT('%', #{fieldName}, '%')
           </if>
           <if test="value != null and value != ''">
               and t.value like CONCAT('%', #{value}, '%')
           </if>
           <if test="field != null and field != ''">
               and t.field like CONCAT('%', #{field}, '%')
           </if>
           <if test="tableName != null and tableName != ''">
               and t.table_name like CONCAT('%', #{tableName}, '%')
           </if>
       </where>
    </sql>
	<select id="getDictList" resultType="map">
		SELECT value, text FROM ec_sys_dict where table_name = #{tableName} and field = #{field} order by sort
	</select>

    <select id="selectDictObjectList" resultType="com.arvato.common.msg.DictData">
		SELECT value, text,field_name fieldName,"sort" FROM ec_sys_dict where table_name = #{tableName} and field = #{field} order by sort
	</select>

	<select id="getDictText" resultType="string">
		SELECT text FROM ec_sys_dict where table_name = #{tableName} and field = #{field} and value = #{value}
	</select>


    <select id="selectDictCount" resultType="int" parameterType="com.mei.zhuang.entity.sys.CrmSysDict">
       select
           count(0)
       from
           ec_sys_dict t
       <include refid="whereCondition"></include>
    </select>

    <select id="selectDictList" resultMap="BaseResultMap">
       select
           t.id,
           t.value,
           t.text,
           t.table_name,
           t.field,
           t.field_name,
           t.sort,
           t.create_date
       from
           ec_sys_dict t
       <include refid="whereCondition"></include>
       order by t.id desc
       limit #{limit} offset #{offset}
    </select>


</mapper>
